<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>의적단 출석부</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    :root{ --bg:#0b0b0f; --panel:#14141a; --soft:#1c1c25; --text:#eaeaf7; --muted:#a6a6bf; --accent:#7dd3fc; --danger:#ff6b6b; }
    *{ box-sizing:border-box; }
    body{ margin:0; background:var(--bg); color:var(--text); font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, sans-serif; }
    .wrap{ max-width:980px; margin:0 auto; padding:12px; padding-bottom:200px; }
    header{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px 0; }
    .title{ flex:1; text-align:center; font-weight:700; font-size:18px; letter-spacing:0.2px; }
    .btn{ border:none; background:var(--soft); color:var(--text); padding:10px 12px; border-radius:999px; font-weight:600; cursor:pointer; }
    .btn:active{ transform:translateY(1px); }
    .btn.small{ padding:6px 10px; font-size:14px; }
    .btn.accent{ background:linear-gradient(135deg, #38bdf8, #818cf8); color:#0b0b0f; }
    .btn.ghost{ background:transparent; border:1px solid var(--soft); }

    .tabs{ display:flex; gap:6px; background:var(--panel); padding:6px; border-radius:12px; position:sticky; top:0; z-index:5; }
    .tab{ flex:1; text-align:center; padding:10px; border-radius:8px; background:var(--soft); color:var(--muted); font-weight:700; cursor:pointer; }
    .tab.active{ color:#0b0b0f; background:linear-gradient(135deg, #38bdf8, #818cf8); }

    .view{ margin-top:12px; display:grid; gap:10px; }
    .card{ background:var(--panel); border:1px solid var(--soft); border-radius:14px; padding:12px; }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .muted{ color:var(--muted); font-size:12px; }
    .pill{ background:var(--soft); padding:4px 8px; border-radius:999px; font-size:12px; }
    .list{ display:grid; gap:8px; }

    .member-cell{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px; border-radius:10px; background:var(--soft); cursor:pointer; }
    .member-cell .meta{ font-size:12px; color:var(--muted); }

    .section-title{ font-weight:800; font-size:14px; margin:8px 0 6px; color:var(--muted); }

    /* Modal */
    .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.5); padding:16px; z-index:50; }
    .modal.open{ display:flex; }
    .sheet{ width:100%; max-width:560px; background:var(--panel); border:1px solid var(--soft); border-radius:16px; overflow:hidden; }
    .sheet header{ padding:12px; border-bottom:1px solid var(--soft); }
    .sheet .body{ padding:12px; display:grid; gap:10px; max-height:70vh; overflow:auto; }
    .sheet .footer{ display:flex; gap:8px; padding:12px; border-top:1px solid var(--soft); }
    label{ display:grid; gap:6px; font-size:12px; color:var(--muted); }
    input[type="text"], input[type="date"], .input{ width:100%; border:1px solid var(--soft); background:#0e0e14; color:var(--text); padding:10px; border-radius:10px; }
    .chips{ display:flex; flex-wrap:wrap; gap:6px; }
    .chip{ background:var(--soft); padding:6px 8px; border-radius:999px; font-size:12px; display:flex; gap:6px; align-items:center; }
    .chip .x{ cursor:pointer; opacity:.7; }

    /* Debug Dock (default collapsed) */
    .debug-dock{ position:fixed; left:0; right:0; bottom:0; background:#0e0e14; border-top:1px solid var(--soft); z-index:99; }
    .debug-dock.collapsed .debug-log{ display:none; }
    .debug-toolbar{ display:flex; align-items:center; gap:8px; padding:6px 10px; font-size:12px; color:var(--muted); }
    .debug-toolbar .spacer{ flex:1; }
    .debug-log{ height:160px; overflow:auto; padding:6px 10px; font:12px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space:pre-wrap; background:#0b0b10; color:#d6e3ff; }

    /* Loading Overlay */
    .loading-overlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:120; backdrop-filter: blur(2px); }
    .loading-overlay.show{ display:flex; }
    .loading-box{ background:var(--panel); border:1px solid var(--soft); border-radius:16px; padding:16px 18px; display:flex; align-items:center; gap:12px; box-shadow:0 6px 20px rgba(0,0,0,.35); }
    .spinner{ width:28px; height:28px; border:3px solid rgba(255,255,255,.2); border-top-color:#7dd3fc; border-radius:50%; animation:spin 1s linear infinite; }
    @keyframes spin{ to{ transform:rotate(360deg); } }

    @media (max-width:480px){ .title{ font-size:16px; } }
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <button id="btnAddMember" class="btn">회원 추가</button>
    <div class="title">의적단 출석부</div>
    <button id="btnAddMeeting" class="btn">모임 추가</button>
  </header>

  <div class="tabs">
    <div class="tab active" data-tab="meetings">모임별 출석</div>
    <div class="tab" data-tab="members">회원별 출석</div>
    <div class="tab" data-tab="stats">통계</div>
  </div>

  <main id="view" class="view"></main>
</div>

<!-- Member Modal -->
<div id="memberModal" class="modal">
  <div class="sheet">
    <header class="row"><strong>회원 정보</strong><button class="btn ghost small" data-close>닫기</button></header>
    <div class="body" id="memberBody"></div>
    <div class="footer">
      <button id="btnMemberDelete" class="btn" style="background:var(--danger)">회원 삭제</button>
      <button id="btnMemberSave" class="btn accent" style="margin-left:auto">저장하기</button>
    </div>
  </div>
</div>

<!-- Meeting Modal -->
<div id="meetingModal" class="modal">
  <div class="sheet">
    <header class="row"><strong>모임 정보</strong><button class="btn ghost small" data-close>닫기</button></header>
    <div class="body" id="meetingBody"></div>
    <div class="footer">
      <button id="btnMeetingDelete" class="btn" style="background:var(--danger)">모임 삭제</button>
      <button id="btnMeetingSave" class="btn accent" style="margin-left:auto">저장하기</button>
    </div>
  </div>
</div>

<!-- Debug Dock (collapsed by default) -->
<div id="debugDock" class="debug-dock collapsed">
  <div class="debug-toolbar">
    <strong>Debug Log</strong>
    <button id="dbgToggle" class="btn small ghost">접기/펼치기</button>
    <button id="dbgClear" class="btn small">지우기</button>
    <span class="spacer"></span>
    <span id="dbgStatus">idle</span>
  </div>
  <div id="debugLog" class="debug-log" aria-live="polite"></div>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay" class="loading-overlay" aria-live="polite" aria-busy="true">
  <div class="loading-box">
    <div class="spinner"></div>
    <div id="loadingMessage">데이터 통신 중…</div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
