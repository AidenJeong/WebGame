* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; height: 100%; background: #0e0f13; color: #e8e8ea; font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Arial, 'Apple Color Emoji', 'Segoe UI Emoji'; }
#app { position: fixed; inset: 0; display: grid; place-items: center; }

/* 모바일: 꽉찬 세로, 데스크탑: 세로 레터박스 */
#game { 
  background: #0b0c10; outline: none;
  touch-action: none;  /* 기본 제스처 방지 */
  -webkit-user-select: none; user-select: none;
  -webkit-touch-callout: none;
  border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

/* HUD */
#hud { 
  position: absolute; top: env(safe-area-inset-top, 0); left: 0; right: 0;
  padding: 8px 10px; display: flex; justify-content: space-between; align-items: center;
  pointer-events: none; font-weight: 600;
}
#hearts { font-size: 20px; letter-spacing: 2px; }
#hearts .filled { color: #ff3b62; }
#hearts .empty { color: #7a7a85; }

#status { display: flex; gap: 10px; font-size: 14px; opacity: .9; }
#status span { background: rgba(255,255,255,.06); padding: 4px 8px; border-radius: 8px; }

/* 오버레이 */
.center { position: absolute; inset: 0; display: grid; place-items: center; }
.panel { background: rgba(255,255,255,.04); padding: 24px; border-radius: 14px; text-align: center; backdrop-filter: blur(4px); }
.panel h1 { margin: 8px 0 10px; font-size: 28px; letter-spacing: 0.5px; }
.panel p { margin: 6px 0 14px; opacity: .9; }
.panel button { background: #4f46e5; color: white; border: none; padding: 10px 16px; border-radius: 10px; font-weight: 700; cursor: pointer; }
.panel button:hover { filter: brightness(1.05); }

.hidden { display: none; }
#popup { position: absolute; inset: 0; display: grid; place-items: center; }
#popup .panel { min-width: 260px; }

/* Layering to ensure overlays are clickable above the canvas */
#game { position: relative; z-index: 0; }
#hud { z-index: 20; }
#overlay { position: absolute; inset: 0; z-index: 30; pointer-events: auto; }
#popup { position: absolute; inset: 0; z-index: 40; pointer-events: auto; }

/* NEW: 시작 전에는 캔버스가 포인터 이벤트를 못 받게 막기 */
#game.blocked { pointer-events: none; }
